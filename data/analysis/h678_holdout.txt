======================================================================
h393: Holdout Validation of All Tier Rules (Overfitting Audit)
======================================================================

Loading predictor...
Loaded 3592 GT diseases, 57493 pairs
Diseases with GT + embeddings: 454

--- FULL-DATA BASELINE (no holdout) ---
Evaluated 454 diseases, 13587 predictions

Full-data tier precision:
  GOLDEN: 89.0% (306/344)
  HIGH: 73.5% (612/833)
  MEDIUM: 50.6% (589/1164)
  LOW: 23.0% (1064/4632)
  FILTER: 16.4% (1082/6614)

======================================================================
SEED 42 (1/5)
======================================================================
Train: 363, Holdout: 91
Holdout: 91 diseases, 2728 predictions

Holdout tier precision:
  GOLDEN: 60.6% (20/33)
  HIGH: 46.5% (59/127)
  MEDIUM: 36.6% (67/183)
  LOW: 15.2% (141/927)
  FILTER: 9.3% (135/1458)

======================================================================
SEED 123 (2/5)
======================================================================
Train: 363, Holdout: 91
Holdout: 91 diseases, 2727 predictions

Holdout tier precision:
  GOLDEN: 68.8% (64/93)
  HIGH: 64.5% (107/166)
  MEDIUM: 41.0% (59/144)
  LOW: 13.4% (125/935)
  FILTER: 10.5% (146/1389)

======================================================================
SEED 456 (3/5)
======================================================================
Train: 363, Holdout: 91
Holdout: 91 diseases, 2725 predictions

Holdout tier precision:
  GOLDEN: 76.7% (33/43)
  HIGH: 66.5% (103/155)
  MEDIUM: 32.1% (60/187)
  LOW: 16.0% (154/960)
  FILTER: 8.8% (122/1380)

======================================================================
SEED 789 (4/5)
======================================================================
Train: 363, Holdout: 91
Holdout: 91 diseases, 2729 predictions

Holdout tier precision:
  GOLDEN: 71.4% (10/14)
  HIGH: 68.9% (104/151)
  MEDIUM: 37.3% (85/228)
  LOW: 12.7% (118/928)
  FILTER: 8.3% (117/1408)

======================================================================
SEED 2024 (5/5)
======================================================================
Train: 363, Holdout: 91
Holdout: 91 diseases, 2724 predictions

Holdout tier precision:
  GOLDEN: 81.6% (40/49)
  HIGH: 60.4% (90/149)
  MEDIUM: 44.8% (78/174)
  LOW: 14.5% (117/808)
  FILTER: 10.6% (163/1544)

======================================================================
AGGREGATE HOLDOUT RESULTS (mean ± std across 5 seeds)
======================================================================

--- TIER PRECISION: Full-Data vs Holdout ---
  GOLDEN  : Full= 89.0% | Holdout= 71.8% ±  7.1% | Delta=-17.2pp
  HIGH    : Full= 73.5% | Holdout= 61.4% ±  7.9% | Delta=-12.1pp
  MEDIUM  : Full= 50.6% | Holdout= 38.4% ±  4.3% | Delta=-12.2pp
  LOW     : Full= 23.0% | Holdout= 14.4% ±  1.2% | Delta= -8.6pp
  FILTER  : Full= 16.4% | Holdout=  9.5% ±  0.9% | Delta= -6.9pp

--- SUCCESS CRITERIA ---
GOLDEN holdout precision > 30%: PASS (71.8%)
Tier ordering (GOLDEN > HIGH > MEDIUM > LOW > FILTER): PASS
  Values: GOLDEN=71.8% > HIGH=61.4% > MEDIUM=38.4% > LOW=14.4% > FILTER=9.5%

--- PER-RULE HOLDOUT ANALYSIS ---
Rule                                     Tier      Full%  Hold%  ±std      Δ     n Status      
----------------------------------------------------------------------------------------------------
  inverse_indication                     FILTER    15.0%  10.1% ± 8.4  -4.9     33 GENUINE
  default                                FILTER    19.5%  11.8% ± 0.6  -7.7   1519 degraded
  complication_non_validated             FILTER    24.0%   4.3% ± 4.3 -19.7     11 OVERFITTED?
  cross_domain_isolated                  FILTER     9.2%   6.8% ± 2.3  -2.4     59 GENUINE
  cancer_no_gt                           FILTER     6.9%   4.7% ± 3.9  -2.2     95 GENUINE
  corticosteroid_iatrogenic              FILTER    25.0%   6.9% ± 7.2 -18.1      5 small-n
  base_to_complication                   FILTER    38.7%  19.1% ±17.8 -19.6      9 OVERFITTED?
  non_therapeutic_compound               FILTER    18.2%   0.0% ± 0.0 -18.2      2 OVERFITTED?
  cancer_only_non_cancer                 FILTER    11.8%   0.0% ± 0.0 -11.8      4 degraded
  statin_cv_event                        GOLDEN    60.0%   0.0% ± 0.0 -60.0      0 small-n
  cardiovascular_hierarchy_arrhythmia    GOLDEN    80.0%  65.3% ± 9.3 -14.7     12 degraded
  cardiovascular_hierarchy_coronary      GOLDEN    78.1%  76.9% ± 0.0  -1.2     13 GENUINE
  autoimmune_hierarchy_rheumatoid_arthritis GOLDEN    97.4%  85.0% ± 9.4 -12.4     24 degraded
  metabolic_hierarchy_lipid              GOLDEN    80.9%  54.6% ±19.5 -26.3     18 OVERFITTED?
  respiratory_hierarchy_asthma           GOLDEN   100.0%   0.0% ± 0.0 -100.0      0 OVERFITTED?
  autoimmune_hierarchy_colitis           GOLDEN    97.1%  85.7% ± 0.0 -11.4      7 degraded
  neurological_hierarchy_epilepsy        GOLDEN   100.0%   0.0% ± 0.0 -100.0      0 OVERFITTED?
  neurological_hierarchy_alzheimers      GOLDEN   100.0%   0.0% ± 0.0 -100.0      0 small-n
  metabolic_hierarchy_obesity            GOLDEN   100.0%   0.0% ± 0.0 -100.0      0 small-n
  neurological_hierarchy_neuropathy      GOLDEN   100.0%   0.0% ± 0.0 -100.0      1 small-n
  transe_medium_promotion                HIGH      78.2%  68.3% ±23.8  -9.9      6 degraded
  cardiovascular_hierarchy_heart_failure HIGH      50.0%   0.0% ± 0.0 -50.0      0 small-n
  cardiovascular_hierarchy_hypertension  HIGH      86.5%  87.5% ±12.5  +1.0      7 GENUINE
  comp_to_base_high_87                   HIGH     100.0%  83.3% ±16.6 -16.7      8 OVERFITTED?
  metabolic_hierarchy_diabetes           HIGH      86.5%  37.9% ±13.2 -48.6      6 OVERFITTED?
  cancer_same_type_mech_rank10           HIGH      90.2%  70.6% ±14.7 -19.6     25 OVERFITTED?
  autoimmune_hierarchy_multiple_sclerosis HIGH     100.0%   0.0% ± 0.0 -100.0      0 OVERFITTED?
  corticosteroid_soc_promotion           HIGH      54.3%  58.1% ±10.3  +3.8     75 GENUINE
  cardiovascular_hierarchy_atherosclerosis HIGH     100.0%   0.0% ± 0.0 -100.0      0 small-n
  infectious_hierarchy_uti               HIGH     100.0%   0.0% ± 0.0 -100.0      0 OVERFITTED?
  respiratory                            HIGH      70.0%  55.0% ±40.0 -15.0      4 degraded
  metabolic_hierarchy_thyroid            HIGH      80.0%  77.8% ±15.7  -2.2      2 GENUINE
  autoimmune_hierarchy_spondylitis       HIGH     100.0%   0.0% ± 0.0 -100.0      0 OVERFITTED?
  autoimmune_hierarchy_lupus             HIGH     100.0%   0.0% ± 0.0 -100.0      0 OVERFITTED?
  infectious_hierarchy_tuberculosis      HIGH      81.8%  55.6% ±41.6 -26.2      2 OVERFITTED?
  neurological                           HIGH      80.0% 100.0% ± 0.0 +20.0      1 small-n
  reproductive                           HIGH      50.0%  50.0% ±50.0  +0.0      2 small-n
  respiratory_hierarchy_copd             HIGH     100.0%   0.0% ± 0.0 -100.0      0 small-n
  infectious_hierarchy_respiratory_infection HIGH     100.0%   0.0% ± 0.0 -100.0      0 small-n
  infectious_hierarchy_sepsis            HIGH      80.0%   0.0% ± 0.0 -80.0      0 small-n
  autoimmune_hierarchy_scleroderma       HIGH     100.0%   0.0% ± 0.0 -100.0      0 small-n
  incoherent_demotion                    LOW       43.1%  63.2% ± 3.2 +20.1     50 GENUINE
  default_no_mech_high_rank              LOW       20.7%  18.2% ± 6.8  -2.5     36 GENUINE
  metabolic_medium_demotion              LOW        9.9%   7.4% ± 5.4  -2.5     45 GENUINE
  broad_class_isolated                   LOW       51.7%  26.3% ±14.7 -25.4      7 OVERFITTED?
  cancer_targeted_therapy                LOW       29.9%  12.1% ± 3.9 -17.8     58 OVERFITTED?
  cancer_same_type_high_rank             LOW       43.0%  24.0% ±14.8 -19.0     16 OVERFITTED?
  cancer_same_type_no_mechanism          LOW       40.6%  19.5% ± 7.1 -21.1     23 OVERFITTED?
  cardiovascular_medium_demotion         LOW       24.3%  16.8% ± 3.3  -7.5     60 degraded
  neurological_medium_demotion           LOW       18.7%   6.8% ± 4.4 -11.9     36 degraded
  gastrointestinal_medium_demotion       LOW       20.9%   6.4% ± 6.2 -14.5     39 degraded
  cancer                                 LOW        9.5%  14.4% ± 5.7  +4.9     76 GENUINE
  local_anesthetic_procedural            LOW        8.6%   5.4% ± 4.7  -3.2     18 GENUINE
  antimicrobial_pathogen_mismatch        LOW        3.0%   2.6% ± 1.5  -0.4     65 GENUINE
  immunological_medium_demotion          LOW       27.9%   5.0% ± 5.0 -22.9     20 OVERFITTED?
  metabolic                              LOW       14.0%   7.5% ± 8.3  -6.5      8 degraded
  hematological_medium_demotion          LOW       18.6%   7.2% ± 2.9 -11.4     36 degraded
  infectious_corticosteroid_demotion     LOW       17.9%   5.6% ± 6.8 -12.3     10 degraded
  infectious_hierarchy_pneumonia         LOW       80.0% 100.0% ± 0.0 +20.0      1 GENUINE
  reproductive_medium_demotion           LOW       13.3%   1.0% ± 1.7 -12.3     15 degraded
  hematological_corticosteroid_demotion  LOW        4.3%   2.5% ± 3.1  -1.8     14 GENUINE
  mechanism_specific                     LOW       16.3%   5.2% ± 9.3 -11.1     32 degraded
  cv_pathway_comprehensive               MEDIUM    68.3%  45.5% ±10.4 -22.8     14 OVERFITTED?
  default_freq10_nomech_r6_10            MEDIUM    31.9%  27.4% ± 3.2  -4.5     34 GENUINE
  cancer_same_type                       MEDIUM    60.6%  47.1% ±10.6 -13.5     12 degraded
  target_overlap_promotion               MEDIUM    70.7%  44.3% ±12.9 -26.4     35 OVERFITTED?
  default_freq10_nomech_r1_5             MEDIUM    43.7%  39.3% ± 7.9  -4.4     49 GENUINE
  default_freq5_mechanism                MEDIUM    45.1%  30.6% ± 9.9 -14.5     13 degraded
  cardiovascular                         MEDIUM    58.3%  43.2% ±14.1 -15.1      9 OVERFITTED?
  cv_established_drug_rescue             MEDIUM    36.8%  65.0% ±29.1 +28.2      9 GENUINE
  hematological                          MEDIUM    48.3%  19.9% ±12.4 -28.4     20 OVERFITTED?
  infectious_cs_tb_demotion              MEDIUM    94.1%  92.8% ± 7.1  -1.2      6 GENUINE
  neurological_hierarchy_parkinsons      MEDIUM   100.0%   0.0% ± 0.0 -100.0      0 small-n
  highly_repurposable                    MEDIUM    33.3%   0.0% ± 0.0 -33.3      0 small-n
  neurological_hierarchy_migraine        MEDIUM   100.0%   0.0% ± 0.0 -100.0      0 small-n

--- OVERFITTED RULES (holdout drops >15pp, n>=10) ---
  complication_non_validated: Full=24.0% → Holdout=4.3% (Δ=-19.7pp, n=75)
  base_to_complication: Full=38.7% → Holdout=19.1% (Δ=-19.6pp, n=31)
  non_therapeutic_compound: Full=18.2% → Holdout=0.0% (Δ=-18.2pp, n=11)
  metabolic_hierarchy_lipid: Full=80.9% → Holdout=54.6% (Δ=-26.3pp, n=68)
  respiratory_hierarchy_asthma: Full=100.0% → Holdout=0% (Δ=-100.0pp, n=20)
  neurological_hierarchy_epilepsy: Full=100.0% → Holdout=0% (Δ=-100.0pp, n=16)
  comp_to_base_high_87: Full=100.0% → Holdout=83.4% (Δ=-16.7pp, n=15)
  metabolic_hierarchy_diabetes: Full=86.5% → Holdout=37.9% (Δ=-48.6pp, n=37)
  cancer_same_type_mech_rank10: Full=90.2% → Holdout=70.6% (Δ=-19.6pp, n=193)
  autoimmune_hierarchy_multiple_sclerosis: Full=100.0% → Holdout=0% (Δ=-100.0pp, n=17)
  infectious_hierarchy_uti: Full=100.0% → Holdout=0% (Δ=-100.0pp, n=17)
  autoimmune_hierarchy_spondylitis: Full=100.0% → Holdout=0% (Δ=-100.0pp, n=20)
  autoimmune_hierarchy_lupus: Full=100.0% → Holdout=0% (Δ=-100.0pp, n=12)
  infectious_hierarchy_tuberculosis: Full=81.8% → Holdout=55.6% (Δ=-26.2pp, n=11)
  broad_class_isolated: Full=51.7% → Holdout=26.3% (Δ=-25.4pp, n=29)
  cancer_targeted_therapy: Full=29.9% → Holdout=12.1% (Δ=-17.8pp, n=448)
  cancer_same_type_high_rank: Full=43.0% → Holdout=24.0% (Δ=-19.0pp, n=107)
  cancer_same_type_no_mechanism: Full=40.6% → Holdout=19.5% (Δ=-21.1pp, n=202)
  immunological_medium_demotion: Full=27.9% → Holdout=5.0% (Δ=-22.9pp, n=68)
  cv_pathway_comprehensive: Full=68.3% → Holdout=45.5% (Δ=-22.8pp, n=101)
  target_overlap_promotion: Full=70.7% → Holdout=44.3% (Δ=-26.4pp, n=164)
  cardiovascular: Full=58.3% → Holdout=43.2% (Δ=-15.1pp, n=36)
  hematological: Full=48.3% → Holdout=19.9% (Δ=-28.4pp, n=60)

--- SUMMARY ---
Rules tested: 75
  GENUINE (Δ > -5pp, n>=10): 19
  Degraded (-15pp < Δ < -5pp, n>=10): 17
  OVERFITTED? (Δ < -15pp, n>=10): 23
  Small sample (n<10): 16

Results saved to /Users/jimhuff/github/open-cure/data/analysis/h393_holdout_validation.json
